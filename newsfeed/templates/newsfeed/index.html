{% extends "core/base.html" %}

{% block content %}

<div class = "container border border-primary rounded">
	<h1>Here is your newsfeed.</h1>
</div>

<br>

<div class = "container border border-primary rounded">
	<h1 class = "text-center">
		<a href = "{% url 'communities:request_help' %}">
			Request help.
		</a>
	</h1>
</div>

<br>

<div class = "container border border-primary rounded">
	<h4>
		Recent Help Requests
	</h4>
	{% for modelHelpRequest in listUnfilledHelpRequests %}

		<div class = "container border border-primary rounded">
			<br>
			<a href = "{% url 'communities:profile' modelHelpRequest.author.username %}">
				<img alt = "a profile picture" style="height:10%;width:10%"  class = "rounded-circle img__users-profile-img border border-dark" src = "{{modelHelpRequest.author.profile_picture.url}}">
					{{modelHelpRequest.author}}
			</a> on {{modelHelpRequest.pub_date}}
			<br>
			<br>
			<div class  ="container row">
				<p>Title: </p>
				<a href = "{{modelHelpRequest.get_absolute_url}}">
					<strong>
						"{{modelHelpRequest.title}}"
					</strong>
				</a>
			</div>
			<div class = "container">
				<p>Related tags:</p>
				{% for strTag in modelHelpRequest.get_parsed_tags %}
					<span style= "background-color: aliceblue;" class ="rounded mr-3 p-1">
						<a href = "{% url 'newsfeed:detail_tag' strTag %}" style = "text-decoration: none;">
							{{strTag}}
						</a>
					</span>
				{% endfor %}
			</div>
			<br>
		</div>
		<br>

	{% endfor %}
</div>

<br>

<div class = "container border border-primary rounded">
	<h4>
		See what your followed users are posting.
	</h4>
	{% if listLastNFollowedUserPosts|length == 0 %}
		<p>Looks like theres nothing yet!</p>
	{% else %}
		{% for modelPost in listLastNFollowedUserPosts %}
			<div class = "newsfeed__new-post border border-primary" style="width: 50%;padding:10px;border-radius: 5px;margin-bottom:10px;">
				<a href = "{{modelPost.get_absolute_url}}">
					User  {{modelPost.author}} uploaded a post at {{modelPost.pub_date}}
				</a>
			</div>
		{% endfor %}
	{% endif %}
</div>

<br>

<div class = "container border border-primary rounded">
	<h4>
		Most recent posts today.
	</h4>
	{% if listRecentPost|length == 0 %}
		<p>Looks like theres nothing yet!</p>
	{% endif %}
	{% for modelPost in listRecentPosts %}

		<div class = "newsfeed__new-post border border-primary" style="width: 50%;padding:10px;border-radius: 5px;margin-bottom:10px;">
			<a href = "{{modelPost.get_absolute_url}}">
				User  {{modelPost.author}} uploaded a post at {{modelPost.pub_date}}
			</a>
		</div>

	{% endfor %}
</div>


{% endblock content %}