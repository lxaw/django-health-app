{% extends "core/base.html" %}

{% block content %}

<div class = "container text-center border border-primary rounded p-3">
	<div class = "d-flex flex-row">
		<h1>
			<i class="bi bi-newspaper"></i>
		</h1>
		<h1 class = 'container text-center'>
			Newsfeed
		</h1>
		<h1>
			<i class="bi bi-newspaper"></i>
		</h1>
	</div>
</div>

<br>

<div class = "container border rounded p-3">
	<h4 class = "text-center">
		<a href = "{% url 'newsfeed:help-request-prepare' %}">
			Request help.
		</a>
	</h4>
</div>

<br>
<div class = "container border rounded p-3">
	<h4 class = "text-center">
		<a href ="{% url 'newsfeed:help-request-archive-detail' %}">
			Or view your requests.
		</a>
	</h4>
</div>

<br>

<div class = "container border border rounded p-3">
	<h4 class = 'text-center'>
		Recent Help Requests
	</h4>
	{% if qsUnfilledHelpRequests|length == 0 %}
		<p class = "text-muted">Looks like theres nothing yet!</p>
	{% else %}
		{% for modelHelpRequest in qsUnfilledHelpRequests %}

			{% include "newsfeed/t/tHelpRequest.html" %}

		{% endfor %}
	{% endif %}
	<br>
	<div>
		<ul class='pagination justify-content-center'>
		{% if qsUnfilledHelpRequests.has_previous %}
			<li class="mx-1"><a href='{% url "newsfeed:index" qsUnfilledHelpRequests.previous_page_number %}'>Previous</a></li>
		{% else %}
			<li class='mx-1 disabled'><span >Previous</span></li>
		{% endif %}

		{% for i in qsUnfilledHelpRequests.paginator.page_range %}
			{% if qsUnfilledHelpRequests.number == i %}
			<li class='active mx-1'><span>{{ i }}</span></li>
			{% else %}
			<li class="mx-1"><a href='{% url "newsfeed:index" i %}'>{{ i }}</a></li>
			{% endif %}
		{% endfor %}
		
		{% if qsUnfilledHelpRequests.has_next %}
			<li class="mx-1"><a href='{% url "newsfeed:index" qsUnfilledHelpRequests.next_page_number %}' >Next</a></li>
		{% else %}
			<li class="mx-1"><span class='disabled'>Next</span></li> 
		{% endif %}
		</ul>
	</div>
</div>

<br>

<div class = "container border border rounded p-3">
	<h4 class = 'text-center'>
		See what your followed users are posting.
	</h4>
	{% if listLastNFollowedUserPosts|length == 0 %}
		<p class = "text-muted text-center">
			Looks like theres nothing yet!
		</p>
	{% else %}
		{% for modelPost in listLastNFollowedUserPosts %}
			{% include "communities/t/tPostThumb.html" %}
		{% endfor %}
	{% endif %}
</div>

<br>

<div class = "container border border rounded p-3">
	<h4 class = 'text-center'>
		Most recent posts today.
	</h4>
	{% if listRecentPosts|length == 0 %}
		<p class = "text-muted text-center">
			Looks like theres nothing yet!
		</p>
	{% endif %}
	{% for modelPost in listRecentPosts %}

		{% include "communities/t/tPostThumb.html" %}

	{% endfor %}
</div>


{% endblock content %}

{% include 'newsfeed/t/jsHelpRequest.html' %}
